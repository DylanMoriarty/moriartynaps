language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: kP6keaUaAhkwlt2b4O1EI7Q2fiSmMO3lD+du196gV0cavhzR4h4a+8LaRU+3xgZgTlh7joT6eX7VCOIZUdWDVUflEUpCmi7sniozFM10B1lXIjr7fHAs2UG4B6tk/XphSGMi3bzPDrOpqSnarLTQgpABij6zHAYg9BOzSAw6XrylIoUWD4TCT1LsLLwTaWjn9qURKmZ0cHv+H7JRwCI1l+eZE1AMziQrBbhlbEL10h7yR7lf+eCIG+9fqnqyL5jSFJQXuXnlmA0xVLBx6B4psesf5/TbD7ApFLx03iIrnIhSmDDn4D2BNuWGHomACDqoel97eVTieqZvXBxuWKhrX8zF67lebiKRUty+BEolzINzUkAPZ1Rgzj8IEKwzYJhyewDdJytHKkEFgOeaf36W42+0wMQ0G5eu9qxstgpuJIJOr5kafbn+SUQ4JR+S8kskY8KkQ4j4p6V0Kzon1vXV0QkuXy4jFHjhkr9xi79zaa4mxS9z5iMz+UEHXeIykAaxdwyxNoYaFfQRY8mqG5boBcccAvLeaiveiv1vIm9hWHJOptWWwXiTjmNMU4waz2VvTaLGwvT3CBODPl+is5QO6qjzgiISWRZo3ADbaOI9cqc76e8wDyvC7ZHKBU4p4GPv6ILN5a6Y1rfjzX+jizX37adj92qOzxzZ9Jj1GfWx8nY
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.1
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
