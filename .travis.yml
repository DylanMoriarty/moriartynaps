language: node_js
node_js:
- '8'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: JYZw/E2Yj+QfKuyHzTzr9sQTiGhjtN8wbTmY+Ta/jh5T9liCfWBupHg1MOwx3T5JT5F0XT7fqwYw+CAk6OrobQDe9DsM/MlW26UyMv9zB3deukXNMBPddtruvQXYp3ZqhYMtptNjp6673N4UT38rfHDQDLiCG5HHws0tGs7dkkvXU4qebn7l3EgqueuE/nAI+eBsG4o6tT+DL0WisXfT04Z0lj6sFA1aS720IoDmzAbx/bhVi5A0WSOeXiQvrv4ZEmJr43tKRrMCwVehJkEgH47OOV7DFYP7uee2OKeylYyW35cXonK2j09iYQylXGU5pbSt0TjPpMATOZWAMMyM1Pap6lTAGBpwr/z+k+JUXt5KeeNfxYGA3CTF7kB+jO6ufH0BJ2+xEx1PvKZp2ltt6AMlW3FjHqbdye+W6oJkr4yj95ao5s7D9EhlmKV4IHQwfWWDx/vhoe89tuIYjtKd5IINX2IL95RpzwNzQrTDkFG0472ZUfJWIubbLEQ1ySzo4My+T1vEBSm9O4VFddl7vLxKzpyHUGiHNA+DqT0rsX0PtlRe/7K/EtZ17kaYynb7fcnN7DNnMGTymchP+5GwYRqf3H/LPe6LhUmwE8WUHWtzZ6N/35O6tJRl3W895csCyv3y7IeG7zFYEkVpqQlqKfi/AMJnOkx/lm6V8Va+u1k=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.3
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
