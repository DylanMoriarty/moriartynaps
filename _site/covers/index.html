<!DOCTYPE html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>Covers</title>
  <meta name="description" content="{::nomarkdown}  &lt;/article&gt;&lt;/section&gt;        ">

  <link rel="canonical" href="https://moriartynaps.org/covers/">
  <link rel="alternate" type="application/rss+xml" title="MoriartyNaps" href="https://moriartynaps.org/feed.xml">
  <link href="https://fonts.googleapis.com/css?family=Crimson+Text|Quicksand|Proza+Libre|Averia+Serif+Libre|Oleo+Script|Maven+Pro" rel="stylesheet">

  <link rel="stylesheet" href="/assets/styles/main-27ad62423e.css">

  <link rel="apple-touch-icon" sizes="57x57" href="/assets/graphics/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/graphics/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/graphics/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/graphics/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/graphics/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/graphics/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/graphics/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/graphics/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/graphics/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/graphics/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/graphics/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/graphics/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/graphics/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/graphics/favicon/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/graphics/favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff"> 

  
    <meta property="og:title" content="Covers" />
  

  <!-- <meta name="twitter:card" content="summary"></meta> -->

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@DylanMoriarty">
  <meta name="twitter:creator" content="@DylanMoriarty">
  <meta name="twitter:title" content="Covers">

  
    <meta name="twitter:description" content="The search for the next great album-inspired map pastiche">
    <meta property="og:description" content="The search for the next great album-inspired map pastiche" />
  

  
    <meta property="og:url"         content="https://moriartynaps.org/covers/" />
  
  <meta property="og:type"        content="article" />
  <meta property="og:title"       content="Covers" />
  <meta property="og:image"       content="https://moriartynaps.org/assets/graphics/posts/19-album/soc-img.jpg" />

  <meta name="twitter:image" content="https://moriartynaps.org/assets/graphics/posts/19-album/twi-img.jpg">
</head>


<h1 class="site-title"><a href="../" class="no_underline">Moriarty Naps</a></h1>

<div class="site-home">
  



  <link href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js"></script>



  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.4.0/mapbox-gl-compare.js"></script>
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.4.0/mapbox-gl-compare.css" type="text/css">








<section class="article-container">

  <div class="article-gutter article-gutter_middle"></div>

  <article class="article-content article-content_middle">
    <div class="article-header">
      <div class="article-back"><a href="../" class="no_underline">&larr; back</a></div>
      <h3 class="">Covers</h3>
    </div>

      </article>
</section>
 
<div class="post-image black-border introalbum album album-r post-image__full">
  <fig>
    <img 
      src="/assets/graphics/posts/19-album/covers.jpg"
    />
  </fig>
</div>

<section class="article-container article-cotainer__within">
  <div class="article-gutter article-gutter_middle"></div>
  <article class="article-content article-content_middle">

<div class="inner-musicBox-contain">
  <div class="inner-musicBox-labels">
    <img src="../assets/graphics/posts/music-box.gif" class="music-box-gif music-box-gif_left" />
    <i>Hover for Companion tunes</i>
    <img src="../assets/graphics/posts/music-box-r.gif" class="music-box-gif music-box-gif_right" />
  </div>

  <div class="inner-musicBox">
    <iframe width="100%" height="200" src="https://www.youtube.com/embed/videoseries?list=PL1KbmvLItolRiAYh6GwchueeM6kDO-6nh" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>
</div>

<p>You’ve probably seen a map inspired by Joy Division’s <em>Unknown Pleasures</em> at some point. It’s a simple and beautiful cover of stacked radio waves that has led to a great many cartographic tributes. For example:</p>

<div class="post-image inline-img ">
	<fig>
		<img src="/assets/graphics/blank.png" alt="" data-echo="/assets/graphics/posts/19-album/joyful-colo.png" />
	</fig>
	<figcaption>
		
	</figcaption>
</div>

<p>From <a href="https://www.reddit.com/r/dataisbeautiful/comments/lgrtbq/oc_germanys_population_density_as_a_joy_plot_map/" target="_blank">kudos blooms on Reddit</a>, to write ups by everyone from <a href="https://cartographicperspectives.org/index.php/journal/article/view/1536/1726" target="_blank">Cartographic Persectives</a> to <a href="https://www.vice.com/en/article/d748kz/digital-maps-inspired-by-joy-divisions-unknown-pleasures-album-art" target="_blank">Vice</a>. Lining the storefronts of <a href="https://www.etsy.com/listing/614935069/topo-lines-world-map-print-physical?ga_order=most_relevant&amp;ga_search_type=all&amp;ga_view_type=gallery&amp;ga_search_query=topo-lines+joy&amp;ref=sr_gallery-1-2&amp;organic_search_click=1&amp;pro=1&amp;frs=1&amp;col=1" target="_blank">kitschy Etsy stores</a>, truly, it’s a well trodden, well loved style.</p>

<p>Odd, then, that we stopped there.</p>

<p>Surely in the vast ocean of famous album covers, there are <em>other</em> designs we can take inspiration from..<span class="tinytext">…from which we launch <em>our own</em> kitschy Etsy stores!!!</span></p>

<div class="Chapterbox">
	<div class="ChapterboxHeader">
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
    
    <h2>
    1.
		</h2>
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
	</div>
	<div class="ChapterboxTitle">Dark Roads
	</div>
	<div class="ChapterboxFooterLine ChapterboxLine"></div>
</div>

      </article>
    </section>

<div class="post-image album post-image__full">
	<fig>
		<img src="/assets/graphics/blank.png" alt="" data-echo="/assets/graphics/posts/19-album/darkside.jpg" />
	</fig>
	<figcaption>
		
	</figcaption>
</div>

    <section class="article-container article-cotainer__within">
      <div class="article-gutter article-gutter_middle"></div>
      <article class="article-content article-content_middle">

<p>We gotta start with the reigning champ of famous covers, Pink Floyd’s <span class="tooltip">
	Dark Side of the Moon<i class="collecticons collecticons-circle-information"></i>
	<span class="tooltiptext" style="display:block">
		<img src="./../assets/graphics/posts/19-album/originals/darkside.jpg" />
	</span>
</span></p>

<p>‘Unknown Pleasure’ translates to rising and falling elevation data. here there’s a white line entering a prism and exiting as a brilliant rainbow to work with. A great analogue for the lines that make up roads, &amp; road maps are <a href="https://www.etsy.com/search?q=city%20road%20map" target="_blank">hot hot hot</a>!</p>

<p>Unconvinced?</p>

<p>True, true, roads twist and turn and overlap in ways that aren’t conducive to clean straight rainbows… but why let that stop us? Let’s fill the world with some color:</p>

  </article>
</section>

<div class="mbmap-btns">
  <div class="mbmap-btn darksyde-labels">Turn On Labels</div>
  <div class="mbmap-btn mbmap-btn_active darksyde-lock">Unlock Map</div>
</div>

<div id="comparison-container">
  <div class="darksyde-cover">
    <img src="/assets/graphics/posts/19-album/tap.png" />
  </div>

  <div id="darksyde" class="map"></div>
  <div id="rainbow" class="map"></div>

  <div class="shadows"></div>

  <div class="shadowimg"></div>

  <div class="triangle">&#9650;</div>
</div>

<section class="article-container article-cotainer__within">
  <article class="article-content article-content_middle">

<div class="Chapterbox">
	<div class="ChapterboxHeader">
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
    
    <h2>
    2.
		</h2>
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
	</div>
	<div class="ChapterboxTitle">More Maps About Buildings and Food
	</div>
	<div class="ChapterboxFooterLine ChapterboxLine"></div>
</div>

<p>First introduced at the end of the 40’s, Polaroids remain strong with the trendy. Buoyed by Urban Outfitters and Taylor Swift, the technology has outlived its parent company by a decade. Every time someone writes a “<a href="https://www.google.com/search?q=gen+z+polaroids&amp;oq=gen+z+polaroids&amp;aqs=chrome..69i57j0i22i30.4344j1j4&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank">[the youth] have brought back [old thing]</a>” piece a marketer gets their wings. Polaroids alone have lifted flocks upon flocks.</p>

<p>In ’78 the Talking Heads released their sophmore album <span class="tooltip">
	More Songs About Buildings And Food<i class="collecticons collecticons-circle-information"></i>
	<span class="tooltiptext" style="display:block">
		<img src="./../assets/graphics/posts/19-album/originals/head.jpg" />
	</span>
</span>
. Here the cover featured the band diced up by Polaroids, and reassembled into people shapes.</p>

<p>There are no satellites (that I know of) with Polaroid cameras aboard. We’ll have to settle for multi-spectral instruments instead.</p>

    </article>
  </section>

<div class="post-image album post-image__full album_head">
  <fig>
    <img src="/assets/graphics/posts/19-album/head.jpg" alt="" data-echo="/assets/graphics/posts/19-album/head.jpg" />
  </fig>
</div>

<div class="talkingCont">
  <img src="/assets/graphics/posts/19-album/head_detail.jpg" class="londonMap londonDenver" />
  <img src="/assets/graphics/posts/19-album/head_detail2.jpg" class="londonMap londonMontreal" />
</div>

  <section class="article-container article-cotainer__within">
    <div class="article-gutter article-gutter_middle"></div>
    <article class="article-content article-content_middle">

<p>We can go further. Sure, each pixel in the above images contains countless buildings and food, but not as a resolution we can make out.</p>

<p>For better or worse <span class="tinytext">(for better)</span>, there isn’t <span class="tinytext">(publicly available)</span> satellite imagery that captures the gooeyness of Wisconsin mac n’ cheese. The confusing monument that is Wall Drug. The iconic mistake that is the Seattle Space Needle.</p>

<p>But we can –</p>

    </article>
  </section>

<div class="talking-map"></div>

  <section class="article-container article-cotainer__within">
    <div class="article-gutter article-gutter_middle"></div>
    <article class="article-content article-content_middle">

<p><em>Aside</em> – the back side of <em>More Songs About Buildings and Food</em> <a href="https://landsat.gsfc.nasa.gov/article/now-then-history-portrait-usa" target="_blank">features one of the first false-color nation-wide composites</a>. Published five years after the first nationwide composite of Landsat imagery, the linear notes correctly describe applications Landsat analysis will eventually provide. Wonderfully forward thinking and a fun historical overlap between music and cartography.</p>

<div class="Chapterbox">
	<div class="ChapterboxHeader">
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
    
    <h2>
    3.
		</h2>
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
	</div>
	<div class="ChapterboxTitle">Calling
	</div>
	<div class="ChapterboxFooterLine ChapterboxLine"></div>
</div>

<p>Our first two efforts require a lot of overhead to produce. Would be nice if we could find something with mass appeal and a quicker turnaround.</p>

<p>Let’s go back to the 1950’s. Where a simple, yet distinctive style graced <em>Elvis</em>’s <span class="tooltip">
	debut<i class="collecticons collecticons-circle-information"></i>
	<span class="tooltiptext" style="display:block">
		<img src="./../assets/graphics/posts/19-album/originals/elvis.jpg" />
	</span>
</span>
, and later The Clash’s <span class="tooltip">
	London Calling<i class="collecticons collecticons-circle-information"></i>
	<span class="tooltiptext" style="display:block">
		<img src="./../assets/graphics/posts/19-album/originals/london.jpg" />
	</span>
</span></p>

      </article>
    </section>

<div class="post-image album post-image__full">
	<fig>
		<img src="/assets/graphics/blank.png" alt="" data-echo="/assets/graphics/posts/19-album/london-england.jpg" />
	</fig>
	<figcaption>
		
	</figcaption>
</div>

    <section class="article-container article-cotainer__within">
      <div class="article-gutter article-gutter_middle"></div>
      <article class="article-content article-content_middle">

    </article>
  </section>

<div class="callingCont">
  <img src="/assets/graphics/posts/19-album/london-denver.jpg" class="londonMap londonDenver" />
  <img src="/assets/graphics/posts/19-album/london-montreal.jpg" class="londonMap londonMontreal" />
</div>

  <section class="article-container article-cotainer__within">
    <div class="article-gutter article-gutter_middle"></div>
    <article class="article-content article-content_middle">

<p>Heck, if we really want to save time, we can just automate this style. Give it a whirl below! I’ve included optional guides you can turn on to better tell which cities are available to Clash-ify.</p>

    </article>
  </section>

<div class="mbmap-btns">
  <div class="mbmap-btn calling-labels">Turn On Guides</div>
  <div class="mbmap-btn mbmap-btn_active calling-lock">Unlock Map</div>
</div>

<div class="callingMapCont">
  <div class="callingMap-cover">
    <img src="/assets/graphics/posts/19-album/tap.png" />
  </div>
  <div class="calling-vert"></div>
  <div class="calling-horz"></div>
  <div class="callingMapVingette"></div>
  <div id="callingMap"></div>
</div>

  <section class="article-container article-cotainer__within">
    <div class="article-gutter article-gutter_middle"></div>
    <article class="article-content article-content_middle">

<div class="Chapterbox">
	<div class="ChapterboxHeader">
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
    
    <h2>
    4.
		</h2>
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
	</div>
	<div class="ChapterboxTitle">Map for Drella
	</div>
	<div class="ChapterboxFooterLine ChapterboxLine"></div>
</div>

<p>So far we’ve avoided referencing our inspirations in the pieces themselves. Perhaps that’s a missed opportunity.</p>

<p>Playful and irreverent, the Velvet Underground’s <span class="tooltip">
	debut<i class="collecticons collecticons-circle-information"></i>
	<span class="tooltiptext" style="display:block">
		<img src="./../assets/graphics/posts/19-album/originals/warhol.jpg" />
	</span>
</span>
 cover featured no musicians, or any indications of who or what the band was. Instead, Andy Warhol designed them a banana and his signature. An early interactive, you could peel the banana, which would just reveal a pink banana beneath.</p>

<p>Conveniently, Manhattan is geographically a banana. What better way to pay tribute to these icons of the 60’s than merging icon and place.</p>

<p>Go ahead, give it a peel:</p>

    </article>
  </section>

<div class="post-image post-image__full album velvetGoldmine">
  <video id="velvetGoldmine">
    <source src="/assets/graphics/posts/19-album/velvet.webm" />
  </video>
  <div class="peelSlowly"></div>
</div>

  <section class="article-container article-cotainer__within">
    <div class="article-gutter article-gutter_middle"></div>
    <article class="article-content article-content_middle">

<p>If only Minneapolis was Prince shaped.</p>

<div class="Chapterbox">
	<div class="ChapterboxHeader">
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
    
    <h2>
    5.
		</h2>
		<div class="ChapterboxHeaderLine ChapterboxLine"></div>
	</div>
	<div class="ChapterboxTitle">A Map Insane
	</div>
	<div class="ChapterboxFooterLine ChapterboxLine"></div>
</div>

<p>It seems, perhaps, Unknown Pleasures enjoys success thanks less to the <em>aesthetic</em>, and more the utility of it. There are certainly more use cases for stacked lines of varying values in map making than, say, mountain tops colored like a space rocker’s <span class="tooltip">
	flamboyant mullet<i class="collecticons collecticons-circle-information"></i>
	<span class="tooltiptext" style="display:block">
		<img src="./../assets/graphics/posts/19-album/originals/aladdin.jpg" />
	</span>
</span>
.</p>

    </article>
  </section>

<div class="post-image post-image__full album spaceMan">
  <fig>
    <img src="/assets/graphics/blank.png" data-echo="/assets/graphics/posts/19-album/aladdin.jpg" class="londonMap londonDenver" />
  </fig>
  <div class="bowieBolt">
    <img src="/assets/graphics/blank.png" data-echo="/assets/graphics/posts/19-album/bowie-bolt.png" class="sailor_bolt" />
  </div>
  <div class="wowieZowie">
    <div class="sailor">
      <img src="/assets/graphics/blank.png" data-echo="/assets/graphics/posts/19-album/sailor.png" class="sailor__fella" />
      <img src="/assets/graphics/blank.png" data-echo="/assets/graphics/posts/19-album/sailor-text.png" class="sailor__text" />
    </div>
  </div>
</div>

  <section class="article-container article-cotainer__within">
    <div class="article-gutter article-gutter_middle"></div>
    <article class="article-content article-content_middle">

<p>Still, what fun to see how far a concept can go.</p>

<p class="beneathMap">
  <i>Rock over London. Rock on, Chicago</i><br>
  <i>QGIS. A Free and Open Source Geographic Information System</i><br>
  <i>-Dylan<br>
  <span class="post-date">April, 4th 2021</span></i>
</p>

<div class="notes">
  <i>Dark Side</i> was made using data from OpenStreetMap. The Interactive version is using Mapbox GL, and their road & imagery data.</p>

  <p><i>More Maps About Building and Food</i> was made using Sentinel 2's 2019 June <a href="https://s2maps.eu/">cloudless composite</a>. The <i>Calling Maps</i> were likewise made using Sentinel imagery, and Mapbox again for the interactive iteration.</p>

  <p><i>Aladdin Mt.</i> was made using SRTM 30m data pulled from Google Earth Engine. <i>Map For Drella</i> is a mashup of Microsoft's building database and OpenData NYC.</p>

  <p>This all started with parodying <i>Unknown Pleasures</i> with <i>Dark Side of the Moon</i>. There's a spectacular iteration of that idea that could be done using Turf.js to calculate the velocity of all roads coming out of the triangle to ensure the rainbow roads are perfectly straight... but perfect is the enemy of having weekends.</p>

  <p>I do realize this batch leans super heavy on 60's & 70's ablum covers... but it's difficult to think of modern day one's that are as ubiquitous. Between most music being consumed digitally, the sheer volume of releases, and that we all have our own personal digital DJ's now it just doesn't feel like music is as shared an experience as it had been.</p>

  <p>The Talking Heads inspired map took the longest, thanks to taking three different approaches. First I tried to load ~350 Mapbox maps on the page, idea being each iteration could be loaded with at a different zoom/center point. Turns out most web browsers limit how many web gl containers you can draw! So no dice there.</p>

  <p>From there I turned to Landsat. Through Google Earth Engine I downloaded landsat composites cropped to ~350 different bounds... which worked! But, the Landsat imagery was way too choppy. There were lines from the composites visible even zoomed out all across the states. Snake eyes.</p>

  <p>Luckily, a recent publication of Sentinel composites saved the day. I followed this wonderful tutorial on how to download batches of Sentinel imagery through AWS and was off to the races. After downloading the composites from 2019 for the U.S, merged them in QGIS, and then ran GDAL and Imagemagick to mosiac 500x500 chunks into what ya see here.</p>

  <p><i>Certainly</i> overkill, but again, a lot of fun.</p>

  <p>Unused ideas: The Beatles – where all features are white but are styled to be have faint shadows like they were embossed. Sgt.Peppers, but with all the worlds countries standing upright. Queen II - with four mountains all named 'Queen Mountain' arranged under a northern spotlight. DAMN., but all the DAMS in a country... so, so much to do.</p>

  <p>Here's some outtakes~</p>

  <img src="/assets/graphics/posts/19-album/outakes/rainbow.jpg" />
  <figcaption>Tried out being more faithful to the roads routes, but oofda, wacky inflatable rainbow roads felt are no good.</figcaption>

  <img src="/assets/graphics/posts/19-album/outakes/rainbowoof.jpg" />
  <figcaption>I didn't master the offsets, but at least you don't need 3d glasses to view it like this previous try.</figcaption>

  <img src="/assets/graphics/posts/19-album/outakes/deadmap.jpg" />
  <figcaption>While you can't load 300+ Mapbox Maps on a page, it does make this fun visual. Help computer.</figcaption>

  <img src="/assets/graphics/posts/19-album/outakes/landsat.jpg" />
  <figcaption>Lots of errs when it came to automating the mosiac. Here's the first run with Landsat.</figcaption>

  <img src="/assets/graphics/posts/19-album/outakes/mixed.jpg" />
  <figcaption>Even when things were going smoother, still had some fun mishaps.</figcaption>

  <img src="/assets/graphics/posts/19-album/outakes/badlayering.jpg" />
  <figcaption>Merging projected rasters is the thing of nightmares.</figcaption>
</div>

<style>
  .introalbum { 
    overflow-x: hidden; 
    margin-top: -10rem !important;
  }

  .introalbum img {
    max-width: 100%;
    width: 800px !important;
  }

  .album {
    margin-top: -8rem;
  }

  .album img {
    position: relative;
    max-width: 100%;
    width: 700px;
    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
  }

  .album-r fig::after {
    z-index: -1;
    content: "";
    position: absolute;
    height: 100%;
    width: 148px;
    top: 0;
    bottom: 0;
    background-image: url("./../../assets/graphics/posts/19-album/vinyl.png");
    background-size: contain;
    background-repeat-x: no-repeat;
  }

  .album-l fig::before {
    content: "";
    position: absolute;
    height: 100%;
    width: 148px;
    top: 0;
    bottom: 0;
    background-image: url("./../../assets/graphics/posts/19-album/vinyl.png");
    background-size: contain;
    background-repeat-x: no-repeat;
    transform: rotate(180deg);
    margin-left: -80px;
  }

/*  .velvetGoldmine::after {
    content: "";
    position: absolute;
    height: 100%;
    width: 148px;
    top: 0;
    bottom: 0;
    background-image: url("./../../assets/graphics/posts/19-album/vinyl.png");
    background-size: contain;
    background-repeat-x: no-repeat;
  }*/

  .londonMap {
    box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
  }

  h3 { display: none; }

  #comparison-container {
    display: flex;
    width: 85%;
    height: 80vh;
    position: relative;
    margin: 0 auto 0;
  }

  #darksyde {
    height: 80vh;
  }

  #rainbow {
    height: 80vh;
  }

  #callingMap {
    width: 100%;
    height: 100%;
    margin: 0 auto;
  }

  .letter_vert {
/*    height: calc(100% / 7);*/
  }

  .letter_horz {
    display: inline-block;
/*    width: calc(100% / 7);*/
  }


  .map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
  }

  .shadowimg {
    position: absolute;
    background: url("/assets/graphics/posts/19-album/darkside-shadow.png") no-repeat;
    background-size: 100% 100%;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .mapboxgl-compare {
    display: none !important;
  }

  .triangle {
    z-index:9999;
    position: absolute;
    -webkit-text-stroke: 6px white;
    color: transparent;
    font-size: 200px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
  }

  .triangle:after {
    z-index: -1;
    content: "";
    backdrop-filter: blur(10px);
    -webkit-clip-path: polygon(0% 87%, 50% 0%, 50% 0%, 100% 87%);
    clip-path: polygon(0% 87%, 50% 0%, 50% 0%, 100% 87%);
    background: rgba(0,0,0,0);
    width: 160px;
    height: 160px;
    position: absolute;
    top: calc(50% + 20px);
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .tinytext {
    font-size: 2px;
  }

  .callingCont {
    max-width: 700px;
    width: 85%;
    display: flex;
    margin: 0 auto;
  }

  .callingCont img {
    width: calc(50% - 10px);
  }

  .londonMontreal { margin-left: 10px; }
  .londonDenver { margin-right: 10px; }

  .album_head {
    margin-bottom: 2rem;
  }

  .notes-subtitle {
    font-size: 20px;
    font-weight: 800;
  }

  .notes img {
    max-width: 100%;
  }

  .notes figcaption {
    margin: 0.5rem 0 2rem;
  }

  .velvetGoldmine {
    position: relative;
    max-width: 700px;
    max-height: 700px;
    clear: both;
    box-shadow: 0 2px 16px rgb(0 0 0 / 80%);
    margin: -6rem auto 3rem;
  }

  .peelSlowly {
    position: absolute;
    background-color: rgba(0,0,0,0);
    top: 7%;
    right: 0;
    width: 24%;
    height: 40px;
    cursor: pointer;
  }

  #velvetGoldmine {
    max-width: 100%;
    max-height: 100%;
  }

  .wowieZowie {
    position: absolute;
    top: calc(48% - 20px);
    left: calc(48% - 40px);
    width: 80px;
    height: 80px;
    cursor: zoom-in;
    z-index: 99;
  }

  .bowieBolt {
    position: absolute;
    top: calc(48% - 20px);
    left: calc(48% - 20px);
    width: 40px;
    height: 40px;
    z-index: 1;
    pointer-events: none;
  }

  .bowieBolt img {
    box-shadow: none;
    animation: slowRotate 1s infinite ease-in-out;
  }

  .sailor {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .sailor:hover img {
    width: 300px !important;
    height: 300px !important;
    max-width: 300px !important;
    margin-top: -150px;
    margin-left: -150px;
  }

  .sailor img {
    pointer-events: none;
    position: absolute;
    max-width: 100px;
    width: 0px;
    height: 0px;
    box-shadow: initial;
    transition: all 0.4s ease-in-out;
  }

  .sailor__text {
    position: absolute;
    animation: spinner 15s infinite linear;
    width: 0px;
    height: 0px;
  }

  .spaceMan {
    margin-top: -6rem;
    margin-bottom: 2rem;
  }

  .beneathMap {
    margin-top: 4rem;
  }

  @keyframes spinner {
    0% { transform: rotate();(0deg); }
    50% { transform: rotate(-180deg); }
    100% { transform: rotate(-359deg); }
  }

  @keyframes slowRotate {
    0% { transform: rotate(0deg); }
    20% { transform: rotate(10deg); }
    40% { transform: rotate(0deg); }
    60% { transform: rotate(-10deg); }
    100% { transform: rotate(0deg); }
  }

  .mbmap-btns {
    width: 85%;
    display: flex;
    position: relative;
    margin: -8rem auto 3px;
  }

  .mbmap-btn {
    display: inline-block;
    padding: 15px 0;
    width: calc(50% - 2px);
    color: #666;
    text-transform: uppercase;
    text-align: center;
    font-size: 14px;
    font-weight: 800;
    font-family: "Quicksand";
    letter-spacing: 0.1rem;
    cursor: pointer;
    border: 2px solid #aaa;
    transition: all 0.4s;
  }

  .mbmap-btn:hover {
    background-color: rgba(0,0,0,0.08);
  }

  .mbmap-btn_active {
    border: 2px solid #333;
    background-color: rgba(0,0,0,0.6);
    color: white;
  }

  .mbmap-btn_active:hover {
    background-color: rgba(0,0,0,0.8) !important;
  }

  .darksyde-labels, .calling-labels {
    margin-right: 4px;
  }

  .darksyde-cover, .callingMap-cover {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 999;
    background-color: rgba(0,0,0,0.5);
    text-align: center;
    transition: all 0.2;
    cursor: pointer;
  }

  .darksyde-cover img, .callingMap-cover img {
    margin-top: 2rem;
    max-width: 90%;
  }
</style>

<script>
const DSlabelToggle = document.querySelector('.darksyde-labels')
const DSlockToggle = document.querySelector('.darksyde-lock')
const DScover = document.querySelector('.darksyde-cover')
let DSlabelsVisible = false
let DSlock = true

window.addEventListener('load', function() {
  mapboxgl.accessToken = 'pk.eyJ1IjoiZG1vcmlhcnR5IiwiYSI6Ikd3T29EOWMifQ.-DKJ4ernht84AZmc6Bk51Q'

  const darkSyde = new mapboxgl.Map({
    container: 'darksyde',
    style: 'mapbox://styles/dmoriarty/ckms0if2r0ras17se31m7lvoc',
    zoom: 11.5,
    center: [0.1278, 51.5204],
    attributionControl: false,
    pitch: 55
  })

  const rainbow = new mapboxgl.Map({
    container: 'rainbow',
    style: 'mapbox://styles/dmoriarty/ckln2pkco18ct18s5ahavwl5r',
    zoom: 10.5,
    center: [0.1278, 51.5204],
    attributionControl: false,
    pitch: 55
  })

  var container = '#comparison-container';

  DSlabelToggle.addEventListener('click', ()=> {
    if (DSlabelsVisible) {
      tweakLabels(darkSyde, 'none')
      tweakLabels(rainbow, 'none')

      DSlabelToggle.innerHTML = 'Turn on labels'
      DSlabelToggle.className = 'mbmap-btn darksyde-labels'
      DSlabelsVisible = false
    } else {
      tweakLabels(darkSyde, 'visible')
      tweakLabels(rainbow, 'visible')

      DSlabelToggle.innerHTML = 'Turn off labels'
      DSlabelToggle.className = 'mbmap-btn darksyde-labels mbmap-btn_active'
      DSlabelsVisible = true
    }
  })

  DScover.addEventListener('click', ()=> { 
    hideDSCover()

    DSlockToggle.innerHTML = 'Lock Map'
    DSlockToggle.className = 'mbmap-btn darksyde-lock'
    DSlock = false
  })

  DSlockToggle.addEventListener('click', ()=> {
    const DSmapCont = document.querySelector('#comparison-container')
    const rainbowMapCont = document.querySelector('#rainbow > .mapboxgl-canvas-container')
    const darkSydeMapCont = document.querySelector('#darksyde > .mapboxgl-canvas-container')

    hideDSCover()

    if (DSlock) {
      enableMap(darkSyde)
      enableMap(rainbow)

      DSlockToggle.innerHTML = 'Lock Map'
      DSlockToggle.className = 'mbmap-btn darksyde-lock'
      rainbowMapCont.style.cursor = 'grab'
      darkSydeMapCont.style.cursor = 'grab'
      DSmapCont.setAttribute("pointer-events", "auto !important")
      DSlock = false
    } else {
      disableMap(darkSyde)
      disableMap(rainbow)

      DSlockToggle.innerHTML = 'Unlock Map'
      DSlockToggle.className = 'mbmap-btn mbmap-btn_active darksyde-lock'
      rainbowMapCont.style.cursor = 'auto'
      darkSydeMapCont.style.cursor = 'auto'
      DSmapCont.setAttribute("pointer-events", "none")
      DSlock = true
    }
  })

  const compMap = new mapboxgl.Compare(darkSyde, rainbow, container)
})

function tweakLabels (map, visibility) {
  map.setLayoutProperty('country-label', 'visibility', visibility)
  map.setLayoutProperty('state-label', 'visibility', visibility)
  map.setLayoutProperty('settlement-major-label', 'visibility', visibility)
  map.setLayoutProperty('settlement-minor-label', 'visibility', visibility)
  map.setLayoutProperty('settlement-subdivision-label', 'visibility', visibility)
}

function disableMap (map) {
  map.boxZoom.disable();
  map.scrollZoom.disable();
  map.dragPan.disable();
  map.dragRotate.disable();
  map.keyboard.disable();
  map.doubleClickZoom.disable();
  map.touchZoomRotate.disable();
}

function enableMap (map) {
  map.boxZoom.enable();
  map.scrollZoom.enable();
  map.dragPan.enable();
  map.dragRotate.enable();
  map.keyboard.enable();
  map.doubleClickZoom.enable();
  map.touchZoomRotate.enable();
}

function hideDSCover () {
  DScover.style.opacity = 0
  DScover.style.pointerEvents = 'none'
}

</script>

<script>
  const talkingCont = document.querySelector('.talking-map')
  const validSqrs = ['0000', '0001', '0002', '0003', '0100', '0101', '0102', '0103', '0200', '0201', '0202', '0203', '0300', '0301', '0302', '0303', '0501', '0620', '0809', '0919', '1112', '1310', '1513', '1517', '0502', '0621', '0810', '0920', '1113', '1311', '1514', '0503', '0622', '0811', '1001', '1114', '1312', '1515', '0504', '0701', '0812', '1002', '1115', '1313', '1516', '0505', '0702', '0813', '1003', '1116', '1314', '0506', '0703', '0814', '1004', '1117', '1315', '1604', '0507', '0704', '0815', '1005', '1201', '1402', '1605', '0508', '0705', '0816', '1006', '1202', '1403', '1606', '0509', '0706', '0817', '1007', '1203', '1404', '1607', '0510', '0707', '0818', '1008', '1204', '1405', '1608', '0511', '0708', '0819', '1009', '1205', '1406', '1609', '0512', '0709', '0820', '1010', '1206', '1407', '1610', '0513', '0710', '0900', '1011', '1207', '1408', '1611', '0521', '0611', '0711', '0901', '1012', '1208', '1409', '1612', '0520', '0712', '0902', '1013', '1209', '1410', '1613', '1614', '0601', '0713', '0903', '1014', '1210', '1411', '1616', '0602', '0714', '0904', '1015', '1211', '1412', '1617', '0603', '0715', '0905', '1016', '1212', '1413', '0604', '0717', '0906', '1017', '1213', '1414', '0605', '0718', '0907', '1018', '1019', '1118', '1218', '1316', '1317', '1416', '1417', '1214', '1415', '0606', '0719', '0908', '1101', '1215', '1503', '1707', '0607', '0720', '0909', '1102', '1216', '1504', '1708', '0608', '0721', '0910', '1103', '1217', '1505', '1713', '1710', '1901', '1902', '0609', '0801', '0911', '1104', '1302', '1506', '1716', '0610', '0802', '0912', '1105', '1303', '1507', '1717', '0612', '0803', '0913', '1106', '1304', '1508', '0613', '0804', '0914', '1107', '1305', '1509', '1808', '1809', '0614', '0805', '0915', '1108', '1306', '151', '', '1818', '0806', '0916', '1109', '1307', '1510', '1709', '1817', '0807', '0917', '1110', '1308', '1511', '0619', '0808', '0918', '1111', '1309', '1512']
  const flipSquares = ['0919', '0710', '0503', '1018', '1513', '1605', '1613', '0721', '0609', '1107', '1305', '0611', '0820', '0905', '1302', '0912', '1114']
  const titleSquares = [
    ['0106', 'm'],
    ['0107', 'o'],
    ['0108', 'r'],
    ['0109', 'e'],
    ['0111', 'm'],
    ['0112', 'a'],
    ['0113', 'p'],
    ['0114', 's'],
    ['0116', 'a'],
    ['0117', 'b'],
    ['0118', 'o'],
    ['0119', 'u'],
    ['0120', 't'],
    ['0120', 't'],
    ['0208', 'b'],
    ['0209', 'u'],
    ['0210', 'i'],
    ['0211', 'l'],
    ['0212', 'd'],
    ['0213', 'i'],
    ['0214', 'n'],
    ['0215', 'g'],
    ['0216', 's'],
    ['0310', 'a'],
    ['0311', 'n'],
    ['0312', 'd'],
    ['0314', 'f'],
    ['0315', 'o'],
    ['0316', 'o'],
    ['0317', 'd'],
  ]

  window.addEventListener('DOMContentLoaded', function () {
    makeTalkMap()
  })

  function makeTalkMap() {
    for (var i = 0; i < 529; i++) {
      const row = Math.floor(i / 23)
      const col = i % 23

      const rowStr = (row < 10 ? '0' + row : String(row))
      const colStr = (col < 10 ? '0' + col : String(col))

      const xPos = `calc(((100% - 10px) / 23) * ${col} + 5px)`
      const yPos = `calc(((95%) / 23) * ${row} + 8px)` 

      const randomDeg = `${(Math.random() - 0.5) * 4}deg`

      const posStr = `${rowStr}${colStr}`

      const checkValid = (validSqrs.includes(posStr) ? true : false)
      const checkFlip = (flipSquares.includes(posStr) ? true : false)
      let checkTitle = false
      let titleChar = ''

      titleSquares.forEach((o) => {
        if(o[0] == posStr) {
          checkTitle = true
          titleChar = o[1]
        }
      })

      if (checkValid && checkFlip) {
        // FLIP CONT
        const flipCont = document.createElement('div')
        const flipInner = document.createElement('div')
        const flipFront = document.createElement('div')
        const flipBack = document.createElement('div')

        const animationSet = Math.ceil(Math.random() * 6);

        flipCont.className = `talkingSquare talkingSquareFocus id_${rowStr}${colStr} flipContainer `
        flipCont.style.transform = `rotate(${randomDeg})`
        flipCont.style.left = xPos
        flipCont.style.top = yPos

        flipInner.className = `talkingSquare id_${rowStr}${colStr} flipInner flipInner_flip_${animationSet}`

        flipFront.className = `talkingSquare_front flipFront`
        flipFront.style.backgroundImage = `url(/assets/graphics/posts/19-album/th/${rowStr}${colStr}.jpg)`

        flipBack.className = `talkingSquare_back flipBack`
        flipBack.style.backgroundImage = `url(/assets/graphics/posts/19-album/alt/${rowStr}${colStr}.jpg)`

        flipInner.append(flipFront)
        flipInner.append(flipBack)
        flipCont.append(flipInner)
        talkingCont.append(flipCont)
      } else if (checkValid) {
        // STATIC
        const staticImg = document.createElement('div')

        staticImg.style.backgroundImage = `url(/assets/graphics/posts/19-album/th/${rowStr}${colStr}.jpg)`
        staticImg.className = `talkingSquare id_${rowStr}${colStr}`
        staticImg.style.transform = `rotate(${randomDeg})`
        staticImg.style.left = xPos
        staticImg.style.top = yPos

        talkingCont.append(staticImg)
      } else if (checkTitle) {


        const flipCont = document.createElement('div')
        const flipInner = document.createElement('div')
        const flipFront = document.createElement('div')
        const flipBack = document.createElement('div')

        const animationSet = Math.ceil(Math.random() * 6);

        flipCont.className = `talkingSquare id_${rowStr}${colStr} flipContainer `
        flipCont.style.transform = `rotate(${randomDeg})`
        flipCont.style.left = xPos
        flipCont.style.top = yPos

        flipInner.className = `talkingSquare id_${rowStr}${colStr} flipInner flipInner_flip_8`

        flipFront.className = `talkingSquare_front flipFront`
        flipFront.style.backgroundImage = `url(/assets/graphics/posts/19-album/th/blank.jpg)`

        flipBack.className = `talkingSquare_back flipBack`
        flipBack.style.backgroundImage = `url(/assets/graphics/posts/19-album/alt/${titleChar}.jpg)`

        flipInner.append(flipFront)
        flipInner.append(flipBack)
        flipCont.append(flipInner)
        talkingCont.append(flipCont)
      } else {
        // EMPTY :,(
        const emptyCont = document.createElement('div')
        emptyCont.className = `talkingSquare id_${rowStr}${colStr} talkingSquare_empty`
        emptyCont.style.transform = `rotate(${randomDeg})`
        emptyCont.style.left = xPos
        emptyCont.style.top = yPos

        talkingCont.append(emptyCont)
      }
    }
  }
</script>

<style>
  .talking-map {
    background-color: black;
    width: min(800px, 95vh);
    height: min(800px, 95vh);
    max-width: 100%;
    margin: -6rem auto 3rem;
    padding: 0.5rem 10px 2.5rem;
    box-shadow: 0px 0px 30px rgba(0,0,0,0.75);
    position: relative;
  }

  .talkingSquare {
    position: absolute;
    width: calc((100%  / 23));
    height: calc((98%  / 23));
    background-color: #222;
    display: inline-block;
    border: 0.5px solid rgba(0,0,0,0.65);
    box-sizing: border-box;
    background-size: cover;
    background-repeat: no-repeat;
    -webkit-box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    -moz-box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    transition: all 0.4s ease-in-out;
    z-index: 1;
  }

  .talkingSquareFocus {
    cursor: zoom-in;
  }

  .talkingSquareFocus:hover {
    width: calc((100% / 23 + 100px));
    height: calc((98%  / 23 + 100px));
    transform: translate(-50px, -50px) !important;
    filter: drop-shadow(2px 4px 4px rgba(0,0,0,0));
    z-index: 9999;
  }

  .talkingSquareFocus:hover .flipInner_flip_1, 
  .talkingSquareFocus:hover .flipInner_flip_2, 
  .talkingSquareFocus:hover .flipInner_flip_3, 
  .talkingSquareFocus:hover .flipInner_flip_4, 
  .talkingSquareFocus:hover .flipInner_flip_5, 
  .talkingSquareFocus:hover .flipInner_flip_6 {
    animation: rotation_7 1s normal forwards;
  }

  .flipContainer {
    background-color: transparent;
    width: calc((100%  / 23));
    height: calc((98%  / 23));
    border: 0.5px solid rgba(0,0,0,0);
    box-sizing: border-box;
    perspective: 600px;
    -webkit-box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    -moz-box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
  }

  .flipInner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    pointer-events: none;
  }

  .flipInner_flip_1 { animation: rotation_1 15s infinite linear; }
  .flipInner_flip_2 { animation: rotation_2 15s infinite linear; }
  .flipInner_flip_3 { animation: rotation_3 15s infinite linear; }
  .flipInner_flip_4 { animation: rotation_4 15s infinite linear; }
  .flipInner_flip_5 { animation: rotation_5 15s infinite linear; }
  .flipInner_flip_6 { animation: rotation_6 15s infinite linear; }
  .flipInner_flip_8 { animation: rotation_8 15s infinite linear; }



  .flipFront, .flipBack {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden; /* Safari */
    backface-visibility: hidden;
  }

  .flipFront {
    background-size: cover;
    background-repeat: no-repeat;
  }

  .flipBack {
    background-color: yellow;
    background-size: cover;
    background-repeat: no-repeat;
    color: black;
    transform: rotateY(180deg);
  }

  .talkingSquare_empty {
    pointer-events: none;
  }

  .talkingCont {
    max-width: 700px;
    width: 80%;
    display: flex;
    position: relative;
    margin: 0 auto 2rem;
  }

  .talkingCont img {
    width: calc(50% - 10px);
  }

  @keyframes rotation_1 {
    0% { transform: rotateY(0deg); }
    15% { transform: rotateY(0deg); }
    20% { transform: rotateY(180deg); }
    40% { transform: rotateY(180deg); }
    45% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }

  @keyframes rotation_2 {
    0% { transform: rotateY(0deg); }
    25% { transform: rotateY(0deg); }
    30% { transform: rotateY(180deg); }
    50% { transform: rotateY(180deg); }
    55% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }

  @keyframes rotation_3 {
    0% { transform: rotateY(0deg); }
    35% { transform: rotateY(0deg); }
    40% { transform: rotateY(180deg); }
    60% { transform: rotateY(180deg); }
    65% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }

  @keyframes rotation_4 {
    0% { transform: rotateY(0deg); }
    45% { transform: rotateY(0deg); }
    50% { transform: rotateY(180deg); }
    70% { transform: rotateY(180deg); }
    75% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }

  @keyframes rotation_5 {
    0% { transform: rotateY(0deg); }
    55% { transform: rotateY(0deg); }
    60% { transform: rotateY(180deg); }
    80% { transform: rotateY(180deg); }
    85% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }

  @keyframes rotation_6 {
    0% { transform: rotateY(0deg); }
    65% { transform: rotateY(0deg); }
    70% { transform: rotateY(180deg); }
    90% { transform: rotateY(180deg); }
    95% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }

  @keyframes rotation_7 {
    0% { transform: rotateyY(0deg); }
    100% { transform: rotateY(180deg); }
  }

  @keyframes rotation_8 {
    0% { transform: rotateY(0deg); }
    10% { transform: rotateY(0deg); }
    15% { transform: rotateY(180deg); }
    50% { transform: rotateY(180deg); }
    55% { transform: rotateY(359deg); }
    100% { transform: rotateY(359deg); }
  }
</style>

<script>
  let cityName = 'New York'
  let admin = 'New York'
  let cityNameLen = cityName.length
  let adminLen = admin.length
  let maxChar = (cityNameLen > adminLen ? cityNameLen : adminLen)
  mapboxgl.accessToken = 'pk.eyJ1IjoiZG1vcmlhcnR5IiwiYSI6Ikd3T29EOWMifQ.-DKJ4ernht84AZmc6Bk51Q'

  buildLetters(cityName, 'vert')
  buildLetters(admin, 'horz')

  const callingMap = new mapboxgl.Map({
    container: 'callingMap',
    style: 'mapbox://styles/dmoriarty/ckm4frs7y03jl17o7gywfldcj',
    zoom: 9.5,
    center: [-73.8060, 40.7128],
    attributionControl: false,
    pitch: 15
  })

  const CMlabelToggle = document.querySelector('.calling-labels')
  const CMlockToggle = document.querySelector('.calling-lock')
  const CMcover = document.querySelector('.callingMap-cover')
  let CMlabelsVisible = false
  let CMlock = true

  callingMap.on('load', function () {
    callingMap.on('mousemove', 'nearest-city', function (e) {
      callingMap.getCanvas().style.cursor = 'pointer';
      const props = e.features[0].properties

      if (props.NAME === cityName || CMlock) {
        return
      } else {
        cityName = (props.NAME === 'NULLIS' ? 'NULL' : props.NAME)
        admin = props.ADMIN

        cityName = cityName.replaceAll('.', '')
        cityName = cityName.replaceAll(',', '')

        cityNameLen = cityName.length
        adminLen = admin.length
        maxChar = (cityNameLen > adminLen ? cityNameLen : adminLen)

        buildLetters(cityName, 'vert')
        buildLetters(admin, 'horz')
      }
    })

    CMcover.addEventListener('click', ()=> {
      hideCMCover()

      CMlockToggle.innerHTML = 'Lock Map'
      CMlockToggle.className = 'mbmap-btn calling-lock'
      CMlock = false
    })

    CMlabelToggle.addEventListener('click', ()=> {
      if (CMlabelsVisible) {
        callingMap.setLayoutProperty('city-centroid-point', 'visibility', 'none')
        callingMap.setLayoutProperty('city-centroid-label', 'visibility', 'none')
        callingMap.setLayoutProperty('city-centroid-voronoi', 'visibility', 'none')

        CMlabelToggle.innerHTML = 'Turn on guides'
        CMlabelToggle.className = 'mbmap-btn calling-labels'
        CMlabelsVisible = false
      } else {
        callingMap.setLayoutProperty('city-centroid-point', 'visibility', 'visible')
        callingMap.setLayoutProperty('city-centroid-label', 'visibility', 'visible')
        callingMap.setLayoutProperty('city-centroid-voronoi', 'visibility', 'visible')

        CMlabelToggle.innerHTML = 'Turn off guides'
        CMlabelToggle.className = 'mbmap-btn mbmap-btn_active calling-labels'
        CMlabelsVisible = true
      }
    })

    CMlockToggle.addEventListener('click', ()=> {
      const CmapCont = document.querySelector('#callingMap > .mapboxgl-canvas-container')

      hideCMCover()

      if (CMlock) {
        callingMap.boxZoom.enable();
        callingMap.scrollZoom.enable();
        callingMap.dragPan.enable();
        callingMap.dragRotate.enable();
        callingMap.keyboard.enable();
        callingMap.doubleClickZoom.enable();
        callingMap.touchZoomRotate.enable();

        CMlockToggle.innerHTML = 'Lock Map'
        CMlockToggle.className = 'mbmap-btn calling-labels'
        CmapCont.style.cursor = 'grab'
        CMlock = false
      } else {
        callingMap.boxZoom.disable();
        callingMap.scrollZoom.disable();
        callingMap.dragPan.disable();
        callingMap.dragRotate.disable();
        callingMap.keyboard.disable();
        callingMap.doubleClickZoom.disable();
        callingMap.touchZoomRotate.disable();

        CMlockToggle.innerHTML = 'Unlock Map'
        CMlockToggle.className = 'mbmap-btn mbmap-btn_active calling-labels'
        CmapCont.style.cursor = 'auto'
        CMlock = true
      }
    })

    callingMap.resize()
  })

  function buildLetters(name, dir) {
    const cap = name.toUpperCase()
    const charArray = [...cap]
    const color = (dir === 'vert' ? 'p' : 'g')

    const elem = document.querySelector(`.calling-${dir}`)
    elem.innerHTML = ''

    charArray.map((c) => {
      let img = ''

      if (c != ' ') {
        img = document.createElement('img')
        const charPath = `/assets/graphics/posts/19-album/letters/letters_${color}__${c}.svg`
        img.src = charPath
      } else {
        img = document.createElement('div')
      }

      img.className = `letter letter_${dir}`

      const horzHeight = `calc(100% / ${adminLen}`
      const horzWidth = 'calc(100% - 20px)'

      const vertHeight = `calc(100% - 35px - (100% / ${adminLen}))`
      const vertWidth = `calc((100% - 20px) / ${cityNameLen}`

      if (dir === 'vert') {
        elem.style.width = vertWidth
        elem.style.height = vertHeight

        img.style.height = `calc(${vertHeight} / ${cityNameLen})`
        img.style.width = '100%'
        // elem.width = `calc(100% / ${maxChar})`
      } else {
        elem.style.width = horzWidth
        elem.style.height = horzHeight

        img.style.width = `calc(100% / ${adminLen})`
        img.style.height = `100%`
      }

      elem.appendChild(img)
    })
  }

  function hideCMCover() {
    CMcover.style.opacity = 0
    CMcover.style.pointerEvents = 'none'
  }
</script>

<style>
  .callingCont {
    position: relative;
    margin-top: -14.5rem;
    margin-bottom: 2rem;
  }

  .callingCover {
    z-index: 9999;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: red;
  }

  .callingMapCont {
    width: 85%;
    height: 90vh;
    margin: 0 auto 0;
    position: relative;
  }

  .calling-vert {
    z-index: 9999;
    position: absolute;
    left: 10px;
    top: 15px;
    height: 100%;
    width: 100px;
    display: flex;
    justify-content: space-between;
    flex-direction: column;
  }

  .calling-horz {
    z-index: 9999;
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: 10px;
    height: 100px;
    width: 100%;
  }

  .callingMapVingette {
    z-index: 100;
    position: absolute;
    height: 100%;
    width: 100%;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background: radial-gradient(circle, transparent 50%, black 95%);
    pointer-events: none;
  }
</style>

<script>
  const peelMe = document.querySelector('.peelSlowly')
  const peelVid = document.getElementById("velvetGoldmine");
  let unpeeled = false

  peelMe.addEventListener('click', function() {
    console.log("Watch out, the world's behind you")

    if(!unpeeled) {
      peelVid.play()
      peelMe.style.display = 'none'
      unpeeled = true
    }
  })
</script>



    <div class = "article-foot">
        <div class="article-back"><a href="../" class="no_underline">&larr; Home</a></div>
    </div>

  </article>
</section>

<script>
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
      define(function() {
        return factory(root);
      });
    } else if (typeof exports === 'object') {
      module.exports = factory;
    } else {
      root.echo = factory(root);
    }
  })(this, function (root) {
  
    'use strict';
  
    var echo = {};
  
    var callback = function () {};
  
    var offset, poll, delay, useDebounce, unload;
  
    var isHidden = function (element) {
      return (element.offsetParent === null);
    };
    
    var inView = function (element, view) {
      if (isHidden(element)) {
        return false;
      }
  
      var box = element.getBoundingClientRect();
      return (box.right >= view.l && box.bottom >= view.t && box.left <= view.r && box.top <= view.b);
    };
  
    var debounceOrThrottle = function () {
      if(!useDebounce && !!poll) {
        return;
      }
      clearTimeout(poll);
      poll = setTimeout(function(){
        echo.render();
        poll = null;
      }, delay);
    };
  
    echo.init = function (opts) {
      opts = opts || {};
      var offsetAll = opts.offset || 0;
      var offsetVertical = opts.offsetVertical || offsetAll;
      var offsetHorizontal = opts.offsetHorizontal || offsetAll;
      var optionToInt = function (opt, fallback) {
        return parseInt(opt || fallback, 10);
      };
      offset = {
        t: optionToInt(opts.offsetTop, offsetVertical),
        b: optionToInt(opts.offsetBottom, offsetVertical),
        l: optionToInt(opts.offsetLeft, offsetHorizontal),
        r: optionToInt(opts.offsetRight, offsetHorizontal)
      };
      delay = optionToInt(opts.throttle, 250);
      useDebounce = opts.debounce !== false;
      unload = !!opts.unload;
      callback = opts.callback || callback;
      echo.render();
      if (document.addEventListener) {
        root.addEventListener('scroll', debounceOrThrottle, false);
        root.addEventListener('load', debounceOrThrottle, false);
      } else {
        root.attachEvent('onscroll', debounceOrThrottle);
        root.attachEvent('onload', debounceOrThrottle);
      }
    };
  
    echo.render = function (context) {
      var nodes = (context || document).querySelectorAll('[data-echo], [data-echo-background]');
      var length = nodes.length;
      var src, elem;
      var view = {
        l: 0 - offset.l,
        t: 0 - offset.t,
        b: (root.innerHeight || document.documentElement.clientHeight) + offset.b,
        r: (root.innerWidth || document.documentElement.clientWidth) + offset.r
      };
      for (var i = 0; i < length; i++) {
        elem = nodes[i];
        if (inView(elem, view)) {
  
          if (unload) {
            elem.setAttribute('data-echo-placeholder', elem.src);
          }
  
          if (elem.getAttribute('data-echo-background') !== null) {
            elem.style.backgroundImage = 'url(' + elem.getAttribute('data-echo-background') + ')';
          }
          else if (elem.src !== (src = elem.getAttribute('data-echo'))) {
            elem.src = src;
          }
  
          if (!unload) {
            elem.removeAttribute('data-echo');
            elem.removeAttribute('data-echo-background');
          }
  
          callback(elem, 'load');
        }
        else if (unload && !!(src = elem.getAttribute('data-echo-placeholder'))) {
  
          if (elem.getAttribute('data-echo-background') !== null) {
            elem.style.backgroundImage = 'url(' + src + ')';
          }
          else {
            elem.src = src;
          }
  
          elem.removeAttribute('data-echo-placeholder');
          callback(elem, 'unload');
        }
      }
      if (!length) {
        echo.detach();
      }
    };
  
    echo.detach = function () {
      if (document.removeEventListener) {
        root.removeEventListener('scroll', debounceOrThrottle);
      } else {
        root.detachEvent('onscroll', debounceOrThrottle);
      }
      clearTimeout(poll);
    };
  
    return echo;
  
  });
</script>
<script>
    echo.init({
      offset: 2500,
      throttle: 250,
      unload: false,
      callback: function (element, op) {
        //console.log(element, 'has been', op + 'ed')
      }
    });
</script>


</div>

<footer id="footer">
	<div class="centerme">©2022 <a target="_blank" href="https://twitter.com/DylanMoriarty">Dylan Moriarty</a></div>
</footer>

<script src="/assets/scripts/vendor-0d6388c26b.js"></script>
<script src="/assets/scripts/bundle-807fbb466a.js"></script>
